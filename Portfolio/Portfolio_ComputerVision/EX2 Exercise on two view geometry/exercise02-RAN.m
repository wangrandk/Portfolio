clear all
close all 
clc
%% 1 
Q=Box3D;
Q=[Q;ones(1,size(Q,2))]
plot3(Q(1,:),Q(2,:),Q(3,:),'.'),
axis equal
axis([0 640 0 480]);
xlabel('x')
ylabel('y')
zlabel('z')

A = [1000 0 300; 
    0 1000 200; 
    0 0 1];
t = [0.8816; 0.5694; 0.1911];
R = Rot(0.2, -0.3, 0.1);
P=A*[R,t];

q=P*Q;
q(1,:)=q(1,:)./q(3,:);
q(2,:)=q(2,:)./q(3,:);
q(3,:)=q(3,:)./q(3,:);
figure
plot(q(1,:),q(2,:),'.')

%% 2
Ap = [1000 0 0; 
    0 1000 0; 
    0 0 1];
Aq = [1 0 300; 
    0 1 200; 
    0 0 1];
Pd = Ap * [R t] * Q;
Pd(1,:)=Pd(1,:)./Pd(3,:);
Pd(2,:)=Pd(2,:)./Pd(3,:);
Pd(3,:)=Pd(3,:)./Pd(3,:);

r = sqrt(Pd(1,:).^2 + Pd(2,:).^2);
k3 = -1e-6;
k5= 1e-12;
delta_r = k3* r.^2 + k5 * r.^4;

Pc(1,:) = Pd(1,:).*(1 + delta_r); 
Pc(2,:) = Pd(2,:).*(1 + delta_r);
Pc(3,:) = Pd(3,:);
q_dist = Aq * Pc;
figure
plot(q_dist(1,:),q_dist(2,:),'.')

%% 3
k5= 0;
delta_r = k3* r.^2 + k5 * r.^4;

Pd(1,:) = Pd(1,:).*(1 + delta_r); 
Pd(2,:) = Pd(2,:).*(1 + delta_r);

q_dist = Aq * Pd;
figure
plot(q_dist(1,:),q_dist(2,:),'.')

%% Question2 
%5
Aq = [100 0 300; 
    0 1000 200; 
    0 0 1];

R1 = Rot(0,0,0);
R2 = Rot(-0.1,0.1,0);
t2 = [0.2;2;0.1];
t1 = [0;0;0];

q_1 = A * [R1 t1];
q_2 = A * [R2 t1];

q_1(1,:)=q_1(1,:)./q_1(3,:);
q_1(2,:)=q_1(2,:)./q_1(3,:);
q_1(3,:)=q_1(3,:)./q_1(3,:);

q_2(1,:)=q_2(1,:)./q_2(3,:);
q_2(2,:)=q_2(2,:)./q_2(3,:);
q_2(3,:)=q_2(3,:)./q_2(3,:);

%6






